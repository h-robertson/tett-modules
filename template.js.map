{"version":3,"file":"template.js","sources":["node_modules/d3-selection/src/namespaces.js","node_modules/d3-selection/src/namespace.js","node_modules/d3-selection/src/creator.js","node_modules/d3-selection/src/selector.js","node_modules/d3-selection/src/selectorAll.js","node_modules/d3-selection/src/selection/sparse.js","node_modules/d3-selection/src/selection/enter.js","node_modules/d3-selection/src/selection/data.js","node_modules/d3-selection/src/selection/sort.js","node_modules/d3-selection/src/window.js","node_modules/d3-selection/src/selection/classed.js","node_modules/d3-selection/src/selection/text.js","node_modules/d3-selection/src/selection/html.js","node_modules/d3-selection/src/selection/raise.js","node_modules/d3-selection/src/selection/lower.js","node_modules/d3-selection/src/selection/insert.js","node_modules/d3-selection/src/selection/remove.js","node_modules/d3-selection/src/selection/clone.js","node_modules/d3-selection/src/selection/on.js","node_modules/d3-selection/src/selection/dispatch.js","node_modules/d3-selection/src/selection/index.js","node_modules/d3-selection/src/select.js","node_modules/d3-array/src/ascending.js","node_modules/d3-selection/src/selection/select.js","node_modules/d3-selection/src/selection/selectAll.js","node_modules/d3-selection/src/selection/filter.js","node_modules/d3-selection/src/matcher.js","node_modules/d3-selection/src/constant.js","node_modules/d3-selection/src/selection/exit.js","node_modules/d3-selection/src/selection/join.js","node_modules/d3-selection/src/selection/merge.js","node_modules/d3-selection/src/selection/order.js","node_modules/d3-selection/src/selection/call.js","node_modules/d3-selection/src/selection/nodes.js","node_modules/d3-selection/src/selection/node.js","node_modules/d3-selection/src/selection/size.js","node_modules/d3-selection/src/selection/empty.js","node_modules/d3-selection/src/selection/each.js","node_modules/d3-selection/src/selection/attr.js","node_modules/d3-selection/src/selection/style.js","node_modules/d3-selection/src/selection/property.js","node_modules/d3-selection/src/selection/append.js","node_modules/d3-selection/src/selection/datum.js","node_modules/d3-array/src/bisect.js","node_modules/d3-array/src/bisector.js","node_modules/d3-array/src/ticks.js","node_modules/@flourish/legend/src/common.js","node_modules/@flourish/legend/src/utils.js","node_modules/@flourish/legend/src/container/index.js","node_modules/@flourish/legend/src/discrete-color/index.js","node_modules/d3-collection/src/map.js","node_modules/d3-scale/src/array.js","node_modules/d3-color/src/define.js","node_modules/d3-color/src/color.js","node_modules/d3-interpolate/src/constant.js","node_modules/d3-interpolate/src/color.js","node_modules/d3-interpolate/src/rgb.js","node_modules/d3-interpolate/src/number.js","node_modules/d3-interpolate/src/string.js","node_modules/d3-interpolate/src/value.js","node_modules/d3-interpolate/src/numberArray.js","node_modules/d3-interpolate/src/date.js","node_modules/d3-interpolate/src/array.js","node_modules/d3-interpolate/src/object.js","node_modules/d3-interpolate/src/round.js","node_modules/d3-scale/src/number.js","node_modules/d3-scale/src/continuous.js","node_modules/d3-scale/src/constant.js","node_modules/d3-format/src/formatDecimal.js","node_modules/d3-format/src/exponent.js","node_modules/d3-format/src/formatSpecifier.js","node_modules/d3-format/src/formatPrefixAuto.js","node_modules/d3-format/src/formatRounded.js","node_modules/d3-format/src/formatTypes.js","node_modules/d3-format/src/identity.js","node_modules/d3-format/src/locale.js","node_modules/d3-format/src/formatNumerals.js","node_modules/d3-format/src/formatGroup.js","node_modules/d3-format/src/formatTrim.js","node_modules/d3-scale/src/tickFormat.js","node_modules/d3-format/src/precisionPrefix.js","node_modules/d3-format/src/precisionRound.js","node_modules/d3-format/src/precisionFixed.js","node_modules/d3-scale/src/linear.js","node_modules/d3-scale/src/init.js","node_modules/@flourish/legend/src/continuous-color/index.js","node_modules/d3-format/src/defaultLocale.js","node_modules/@flourish/legend/src/continuous-size/index.js","src/index.js","node_modules/@flourish/legend/src/index.js"],"sourcesContent":["export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like “__proto__”.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_join from \"./join\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","import { ascending } from \"d3-array\";\n\nfunction appendTo(container) {\n\tcontainer.appendChild(this._container.node());\n\n\tif (!document.querySelector(\"#legend-styles\")) {\n\t\tvar css = document.createElement(\"style\");\n\t\tcss.id = \"legend-styles\";\n\t\tcss.type = \"text/css\";\n\t\tcss.innerHTML = \".fl-legend-container.interactive .fl-legend-item:hover { opacity: 0.75; cursor: pointer; }\";\n\t\tdocument.head.appendChild(css);\n\t}\n\n\treturn this;\n}\n\nfunction format(formatFunction) {\n\tthis._formatFunction = formatFunction;\n\treturn this;\n}\n\nfunction getContainer() {\n\treturn this._container;\n}\n\nfunction visible(visible_) {\n\tif (visible_ === undefined) return this._visible;\n\tthis._visible = visible_;\n\treturn this;\n}\n\nfunction autoTitle(value) {\n\tif (value === undefined) return this._auto_title;\n\tthis._auto_title = value;\n\treturn this;\n}\n\nfunction _updateTitle() {\n\tvar _this = this;\n\tvar title = _this._state.title_mode == \"auto\" ? _this.autoTitle() : _this._state.title;\n\n\tthis._container.select(\".fl-legend-title\")\n\t\t.text(title)\n\t\t.style(\"display\", function() {\n\t\t\tif (!title.trim()) return \"none\";\n\t\t\telse if (_this._state.orientation === undefined) return \"inline-block\";\n\t\t\telse return _this._state.orientation == \"horizontal\" ? \"inline-block\" : \"block\";\n\t\t});\n}\n\nfunction getDomain(domain_, state) {\n\tvar domain = domain_.sort(ascending);\n\tvar domain_min = domain[0];\n\tvar domain_max = domain[domain.length - 1];\n\tvar domain_mid = domain.length > 2 ? domain[1] : null;\n\n\tif (state.legend_min !== null || state.legend_max !== null) {\n\t\tif (state.legend_min !== null && state.legend_max !== null) {\n\t\t\tif (state.legend_min < state.legend_max) {\n\t\t\t\tdomain_min = state.legend_min;\n\t\t\t\tdomain_max = state.legend_max;\n\t\t\t}\n\t\t}\n\t\telse if (state.legend_min !== null) {\n\t\t\tdomain_min = state.legend_min;\n\t\t\tif (domain_max < domain_min) domain_max = domain_min + 2;\n\t\t}\n\t\telse {\n\t\t\tdomain_max = state.legend_max;\n\t\t\tif (domain_min > domain_max) domain_min = domain_max - 2;\n\t\t}\n\t}\n\n\tif (domain_mid !== null && (domain_min > domain_mid || domain_max < domain_mid)) domain_mid = null;\n\n\tvar legend_domain = [domain_min];\n\tif (domain_mid !== null) legend_domain.push(domain_mid);\n\tlegend_domain.push(domain_max);\n\n\tlegend_domain.min = domain_min;\n\tlegend_domain.max = domain_max;\n\tlegend_domain.mid = domain_mid;\n\n\treturn legend_domain;\n}\n\nexport { appendTo, format, getContainer, visible, autoTitle, _updateTitle, getDomain };\n","function remToPx(rem) {\n\treturn rem * parseFloat(getComputedStyle(document.documentElement).fontSize);\n}\n\nfunction log10(val) {\n\treturn Math.log(val) / Math.LN10;\n}\n\nfunction roundDown(val) {\n\t// Round x down to nice value (preserve the first significant digit, the remaining digits -> 0)\n\t// e.g. 123.456 => 100, 0.123456 -> 0.1\n\n\tvar exp = Math.floor(log10(val));\n\tvar normalised_val = val / Math.pow(10, exp);\n\tvar normalised_val_floored = Math.floor(normalised_val);\n\tvar rounded = normalised_val_floored * Math.pow(10, exp);\n\t// Remove floating point garbage from decimal values\n\tif (exp < 0) rounded = parseFloat(rounded.toFixed(-exp));\n\n\treturn rounded;\n}\n\nexport { remToPx, roundDown };\n","import { select } from \"d3-selection\";\nimport { remToPx } from \"../utils\";\n\nexport var default_text_size = 1;\n\nvar DEFAULTS = Object.freeze({\n\talignment: \"start\",\n\torientation: \"horizontal\",\n\ttext_color: null,\n\ttitle_weight: \"bold\",\n\ttext_weight: \"normal\",\n\ttext_size: default_text_size\n});\n\nfunction legendContainer(state_) {\n\tthis._state = state_;\n\tfor (var key in DEFAULTS) { if (this._state[key] === undefined) this._state[key] = DEFAULTS[key]; }\n\n\treturn this;\n}\n\nlegendContainer.prototype.appendTo = function (container_) {\n\tthis._container = select(container_).append(\"div\").node();\n\treturn this;\n};\n\nlegendContainer.prototype.add = function (legends) {\n\tthis._legends = Array.isArray(legends) ? legends : [legends];\n\tvar self = this;\n\n\tthis._legends.forEach(function(legend) {\n\t\tif (legend && typeof legend.appendTo == \"function\") legend.appendTo(self._container);\n\t\telse console.warn(\"Please pass in valid legend instances into .add()\");\n\t});\n\n\treturn this;\n};\n\nlegendContainer.prototype.update = function () {\n\tthis._legends.forEach(function(legend) {\n\t\tif (legend && typeof legend.update == \"function\") legend.update();\n\t});\n\n\tvar font_size = this._state.text_size + \"rem\";\n\tvar small_gap = this._state.text_size * 0.2 + \"rem\";\n\tvar mid_gap = this._state.text_size * 0.5 + \"rem\";\n\tvar is_horizontal = this._state.orientation === \"horizontal\";\n\tvar alignment = this._state.alignment;\n\tvar flex_alignment = alignment == \"center\" ? alignment : \"flex-\" + alignment;\n\n\t// ================== //\n\t// MAIN LEGEND STYLES //\n\t// ================== //\n\n\t// Styles for main legend wrapper container\n\tselect(this._container)\n\t\t.style(\"justify-content\", is_horizontal ? flex_alignment: null)\n\t\t.style(\"align-items\", is_horizontal ? null : flex_alignment)\n\t\t.style(\"display\", \"flex\")\n\t\t.style(\"flex-direction\", is_horizontal ? \"row\": \"column\")\n\t\t.style(\"column-gap\", \"1rem\")\n\t\t.style(\"row-gap\", \"0.5rem\");\n\n\t// Styles for each individual legend container\n\tselect(this._container)\n\t\t.selectAll(\".fl-legend-container\")\n\t\t.style(\"justify-content\", flex_alignment)\n\t\t.style(\"column-gap\", mid_gap);\n\n\t// Styles for the titles of each legend\n\tselect(this._container)\n\t\t.selectAll(\".fl-legend-title\")\n\t\t.style(\"color\", this._state.text_color)\n\t\t.style(\"font-weight\", this._state.title_weight)\n\t\t.style(\"font-size\", font_size)\n\t\t.style(\"margin-right\", font_size * 0.25)\n\t\t.style(\"line-height\", \"1.25em\")\n\t\t.style(\"margin-top\", 0)\n\t\t.style(\"margin-bottom\", 0)\n\t\t.style(\"text-align\", alignment);\n\n\n\t// ============================ //\n\t// DISCRETE COLOR LEGEND STYLES //\n\t// ============================ //\n\n\t// Styles for discrete color legend items\n\tselect(this._container).selectAll(\".fl-legend-item\")\n\t\t.style(\"display\", \"inline-flex\")\n\t\t.style(\"gap\", small_gap)\n\t\t.style(\"text-align\", alignment);\n\n\t// Styles discrete color legend labels\n\tselect(this._container)\n\t\t.selectAll(\".fl-legend-label\")\n\t\t.style(\"color\", this._state.text_color)\n\t\t.style(\"font-weight\", this._state.text_weight)\n\t\t.style(\"font-size\", font_size);\n\n\n\t// ===================================== //\n\t// CONTINUOUS SIZE & COLOR LEGEND STYLES //\n\t// ===================================== //\n\n\t// Styles for continuous size and color legend labels\n\tselect(this._container)\n\t\t.selectAll(\".label\")\n\t\t.style(\"color\", this._state.text_color)\n\t\t.style(\"font-weight\", this._state.text_weight)\n\t\t.style(\"margin\", \"0 \" + small_gap)\n\t\t.style(\"font-size\", font_size);\n\n\t// Styles for continuous color labels when legend is in binned mode\n\t// These labels are drawn in canvas, so we're appending the style information\n\t// to the bound data\n\tvar template = window.template || undefined;\n\tvar layout = template ? template.state.layout : undefined;\n\tvar font_color = this._state.text_color || (template && layout && layout.font_color) || \"#333333\";\n\tvar font_family = layout ? layout.body_font.name : window.getComputedStyle(document.body).fontFamily;\n\tvar font_size_in_px = remToPx(this._state.text_size) + \"px\";\n\tvar font_string = this._state.text_weight + \" \" + font_size_in_px + \" \" + font_family;\n\tvar styles = { fillStyle: font_color, font: font_string };\n\tvar pixel_ratio = window.devicePixelRatio || 1;\n\tvar label_h = Math.ceil(remToPx(this._state.text_size) * 0.95);\n\n\tselect(this._container)\n\t\t.selectAll(\".color-range-labels\")\n\t\t.style(\"margin-top\", small_gap)\n\t\t.attr(\"height\", label_h * pixel_ratio)\n\t\t.style(\"height\", label_h + \"px\")\n\t\t.each(function() {\n\t\t\t// We're appending the style information for the binned legend labels\n\t\t\t// to the bound data. This style information is used when the labels\n\t\t\t// get drawn inside the continous color legend code.\n\t\t\tselect(this).datum(styles);\n\t\t});\n\n\n\treturn this;\n};\n\nexport default legendContainer;\n","import { select, event as d3_event } from \"d3-selection\";\nimport { appendTo, format, getContainer, visible, autoTitle, _updateTitle } from \"../common\";\nimport { remToPx } from \"../utils\";\nimport { default_text_size } from \"../container\";\n\nvar legend_count = 0;\nvar DEFAULTS = Object.freeze({\n\tshow_legend: true,\n\n\ttitle_mode: \"auto\",\n\ttitle: \"\",\n\n\tmax_width: 25,\n\n\tswatch_width: 0.75,\n\tswatch_height: 1,\n\tswatch_radius: 3,\n\n\ticon_height: 1,\n\ticon_color: \"#777777\",\n\n\torder_override: \"\",\n\n\torientation: \"horizontal\",\n\n});\n\nfunction DiscreteColorLegend(state_) {\n\tthis._state = state_;\n\tfor (var key in DEFAULTS) {\tif (this._state[key] === undefined) this._state[key] = DEFAULTS[key]; }\n\n\tthis._colorFunction = undefined;\n\tthis._formatFunction = undefined;\n\tthis._legend_items = [];\n\tthis._filtered_items = [];\n\tthis._eventListeners = [];\n\tthis._id = \"fl-legend-discrete-color-\" + legend_count;\n\tthis._visible = true;\n\tthis._auto_title = \"\";\n\n\tthis._container = select(document.createElement(\"div\")).attr(\"class\", \"fl-legend-container\").attr(\"id\", this._id);\n\tthis._container.append(\"p\").attr(\"class\", \"fl-legend-title\");\n\tlegend_count++;\n\n\treturn this;\n}\n\n// Common methods\nDiscreteColorLegend.prototype.appendTo = appendTo;\nDiscreteColorLegend.prototype.format = format;\nDiscreteColorLegend.prototype.getContainer = getContainer;\nDiscreteColorLegend.prototype.visible = visible;\nDiscreteColorLegend.prototype.autoTitle = autoTitle;\nDiscreteColorLegend.prototype._updateTitle = _updateTitle;\n\n\nDiscreteColorLegend.prototype.data = function(items_, colorFunction_) {\n\tthis._colorFunction = colorFunction_;\n\n\tif (!items_ && !colorFunction_) return this._legend_items.slice();\n\n\tif (!colorFunction_) this._legend_items = Array.isArray(items_) ? items_.slice() : [];\n\telse if (!Array.isArray(items_)) this._legend_items = [];\n\telse {\n\t\tthis._legend_items = items_.slice().map(function(legend_item, i) {\n\t\t\tvar legend_item_label = typeof legend_item == \"object\" ? legend_item.label || \"\" : legend_item;\n\t\t\treturn !legend_item_label ? null : {\n\t\t\t\tlabel: legend_item_label,\n\t\t\t\tcolor: colorFunction_(legend_item_label),\n\t\t\t\tindex: i\n\t\t\t};\n\t\t}).filter(function(legend_item) { return legend_item !== null; });\n\t}\n\treturn this;\n};\n\nDiscreteColorLegend.prototype.filtered = function(items_) {\n\tif (!items_) return this._filtered_items.slice();\n\tthis._filtered_items = Array.isArray(items_) ? items_.slice() : [];\n\treturn this;\n};\n\nDiscreteColorLegend.prototype.on = function(type, callback) {\n\tif (!this._container) return this;\n\n\t// Update list of event listeners, so we know if there are any interactions going on\n\tif (callback && this._eventListeners.indexOf(type) < 0) this._eventListeners.push(type);\n\telse if (!callback) this._eventListeners.splice(this._eventListeners.indexOf[type], 1);\n\tthis._container.classed(\"interactive\", this._eventListeners.length > 0);\n\n\t// Remove event listener if callback is empty\n\tif (!callback) this._container.on(type, null);\n\telse {\n\t\tthis._container.on(type, function() {\n\t\t\tvar t = d3_event.target, t_parent = t.parentNode;\n\t\t\tvar item = t.classList.contains(\"fl-legend-item\") ? t : (t_parent.classList.contains(\"fl-legend-item\") ? t_parent : null);\n\t\t\tif (item) {\n\t\t\t\tvar item_data = select(item).datum();\n\t\t\t\tcallback.call(item, item_data, item_data.index);\n\t\t\t}\n\t\t});\n\t}\n\n\treturn this;\n};\n\nDiscreteColorLegend.prototype.update = function() {\n\tvar should_display = this._state.show_legend && this._visible && this._legend_items.length > 0;\n\n\tthis._container.style(\"display\", should_display ? \"\" : \"none\");\n\n\tif (!should_display) return this;\n\n\tthis._updateTitle();\n\tthis._updateLegend();\n\n\treturn this;\n};\n\nfunction sortByOrderOverride(items, order_override_string) {\n\t// First build a lookup table from each of the overridden legend\n\t// labels to the index of its new position in the legend.\n\tvar new_index_lookup = {};\n\tvar overrides = order_override_string.split(/\\s*\\n\\s*/);\n\tfor (var i = 0; i < overrides.length; i++) {\n\t\tvar override = overrides[i];\n\t\tnew_index_lookup[override] = i;\n\t}\n\t// Now go through each of the original items and if it appears in\n\t// the lookup table, set it at its new position in sorted_items.\n\tvar sorted_items = [];\n\tfor (var old_index = 0; old_index < items.length; old_index++) {\n\t\tvar item = items[old_index];\n\t\tvar new_index = new_index_lookup[item.label];\n\t\tif (new_index === undefined) continue;\n\t\tsorted_items[new_index] = item;\n\t}\n\t// If there was any override that isn't a legend label (e.g. it's\n\t// mispelled), there'll be a \"hole\" in the sorted_items array, so\n\t// compact it before returning.\n\treturn sorted_items.filter(function (item) { return item !== undefined; });\n}\n\nDiscreteColorLegend.prototype._updateLegend = function() {\n\tvar _this = this;\n\tvar format = this._formatFunction;\n\tthis._container\n\t\t.style(\"max-width\", remToPx(this._state.max_width) + \"px\")\n\t\t.style(\"display\", \"inline-flex\")\n\t\t.style(\"flex-wrap\", \"wrap\")\n\t\t.style(\"align-items\", this._state.orientation == \"horizontal\" ? \"center\" : \"start\")\n\t\t.style(\"align-content\", this._state.orientation == \"horizontal\" ? \"center\" : null)\n\t\t.style(\"flex-direction\", this._state.orientation == \"horizontal\" ? null : \"column\");\n\n\tvar legend_item_data;\n\tif (this._state.order_override.trim()) {\n\t\tlegend_item_data = sortByOrderOverride(this._legend_items, this._state.order_override);\n\t}\n\telse {\n\t\tlegend_item_data = this._legend_items;\n\t}\n\n\tvar legend_items = this._container\n\t\t.selectAll(\".fl-legend-item\")\n\t\t.data(legend_item_data);\n\n\tvar legend_items_enter = legend_items\n\t\t.enter()\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"fl-legend-item\");\n\n\tlegend_items_enter\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"fl-legend-swatch\");\n\n\tlegend_items_enter\n\t\t.append(\"svg\")\n\t\t.attr(\"class\", \"fl-legend-icon\")\n\t\t.append(\"path\");\n\n\tlegend_items_enter\n\t\t.append(\"p\")\n\t\t.attr(\"class\", \"fl-legend-label\");\n\n\tvar legend_items_update = legend_items.merge(legend_items_enter);\n\n\tlegend_items_update\n\t\t.style(\"display\", this._state.orientation == \"horizontal\" ? \"inline-flex\" : \"flex\")\n\t\t.style(\"opacity\", function(d) {\n\t\t\treturn _this._filtered_items.indexOf(d.label) > -1 ? 0.2 : \"\";\n\t\t})\n\t\t.style(\"align-items\", \"center\")\n\t\t.style(\"column-gap\", default_text_size * 0.2 + \"rem\");\n\n\t// Swatch\n\tlegend_items_update.select(\".fl-legend-swatch\")\n\t\t.style(\"height\", this._state.swatch_height + \"rem\")\n\t\t.style(\"width\", this._state.swatch_width + \"rem\")\n\t\t.style(\"border-radius\", this._state.swatch_radius + \"px\")\n\t\t.style(\"background-color\", function(d) { return d.color; })\n\t\t// Only display if icon not defined\n\t\t.style(\"display\", function(d) {\n\t\t\treturn d.icon ? \"none\" : null;\n\t\t});\n\n\t// Icon\n\tlegend_items_update.select(\".fl-legend-icon\")\n\t\t// Using Math.ceil on SVG width and height seems to prevent subtle cropping of the icon edges (particularly apparent in outline mode)\n\t\t.attr(\"height\", Math.ceil(remToPx(this._state.icon_height)))\n\t\t.attr(\"width\", function(d) {\n\t\t\tif (!d.icon) return 0;\n\n\t\t\tvar w = d.icon.width;\n\t\t\tvar h = d.icon.height;\n\t\t\tvar stroke_width = d.outline ? h * d.stroke_thickness : 0;\n\t\t\tw += stroke_width;\n\t\t\th += stroke_width;\n\n\t\t\tvar aspect_ratio = w / h;\n\t\t\tvar width_px = remToPx(_this._state.icon_height * aspect_ratio);\n\t\t\treturn Math.ceil(width_px);\n\t\t})\n\t\t.style(\"margin-right\", this._state.text_size * 0.25 + \"rem\")\n\t\t.style(\"display\", function(d) {\n\t\t\treturn d.icon ? \"inline-block\" : \"none\";\n\t\t})\n\t\t.select(\"path\")\n\t\t.attr(\"d\", function(d) {\n\t\t\treturn d.icon ? d.icon.path_string : null;\n\t\t})\n\t\t.attr(\"transform\", function(d) {\n\t\t\tif (!d.icon) return null;\n\n\t\t\tvar h = d.icon.height;\n\t\t\tvar stroke_width = d.outline ? h * d.stroke_thickness : 0;\n\t\t\th += stroke_width;\n\n\t\t\tvar svg_height = remToPx(_this._state.icon_height);\n\t\t\tvar scale_factor = svg_height / h;\n\n\t\t\tvar transform = \"scale(\" + scale_factor + \")\";\n\t\t\ttransform += \"translate(\" + 0.5 * stroke_width + \",\" + 0.5 * stroke_width + \")\";\n\n\t\t\treturn transform;\n\t\t})\n\t\t.style(\"fill\", function(d) {\n\t\t\tif (d.outline) return \"none\";\n\t\t\treturn d.color || _this._state.icon_color;\n\t\t})\n\t\t.style(\"stroke\", function(d) {\n\t\t\tif (!d.outline) return \"none\";\n\t\t\treturn d.color || _this._state.icon_color;\n\t\t})\n\t\t.style(\"stroke-width\", function(d) {\n\t\t\tif (!d.outline) return 0;\n\t\t\tvar stroke_width = d.icon.height * d.stroke_thickness;\n\t\t\treturn stroke_width;\n\t\t});\n\n\t// Label\n\tlegend_items_update.select(\".fl-legend-label\")\n\t\t.text(function(d) {\n\t\t\treturn format ? format(d.label) : d.label;\n\t\t})\n\t\t.style(\"margin\", 0)\n\t\t.style(\"user-select\", \"none\");\n\n\tlegend_items.exit().remove();\n\n\tthis._legend_item_els = legend_items_update;\n\n\treturn this;\n};\n\nexport default DiscreteColorLegend;\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(domain) {\n  var a = domain[0], b = domain[domain.length - 1], t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), clamp === identity || (clamp = clamper(domain)), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? clamper(domain) : identity, scale) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous(transform, untransform) {\n  return transformer()(transform, untransform);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": formatDecimal,\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"-\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy, identity} from \"./continuous\";\nimport {initRange} from \"./init\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(identity, identity);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.interpolator(domain); break;\n    default: this.interpolator(interpolator).domain(domain); break;\n  }\n  return this;\n}\n","import { select } from \"d3-selection\";\nimport { scaleLinear } from \"d3-scale\";\nimport { appendTo, format, getContainer, visible, autoTitle, _updateTitle, getDomain } from \"../common\";\nimport { remToPx } from \"../utils\";\n\nvar legend_count = 0;\nvar pixel_ratio = window.devicePixelRatio || 1;\nvar DEFAULTS = Object.freeze({\n\tshow_legend: true,\n\n\ttitle_mode: \"auto\",\n\ttitle: \"\",\n\n\tcolor_band_width: 8,\n\tcolor_band_height: 1,\n\tcolor_band_radius: 3,\n\n\tbinned_label_mode: \"thresholds\",\n\tbinned_label_custom: \"\",\n\n\tlegend_min: null,\n\tlegend_max: null,\n\n});\n\nfunction ContinuousColorLegend(state_) {\n\tthis._state = state_;\n\tfor (var key in DEFAULTS) {\tif (this._state[key] === undefined) this._state[key] = DEFAULTS[key]; }\n\n\tthis._colorFunction = undefined;\n\tthis._formatFunction = undefined;\n\tthis._legend_domain = [];\n\tthis._id = \"fl-legend-continuous-color-\" + legend_count;\n\tthis._visible = true;\n\tthis._marker_value = null;\n\tthis._auto_title = \"\";\n\n\tthis._container = select(document.createElement(\"div\")).attr(\"class\", \"fl-legend-container\").attr(\"id\", this._id).style(\"display\", \"none\");\n\tthis._container.append(\"p\").classed(\"fl-legend-title\", true);\n\tthis._container.append(\"div\").classed(\"min label\", true);\n\tthis._container.append(\"div\").classed(\"color-range-container\", true);\n\tthis._container.select(\".color-range-container\").append(\"canvas\").classed(\"color-range\", true);\n\tthis._container.select(\".color-range-container\").append(\"canvas\").classed(\"color-range-labels\", true);\n\tthis._container.append(\"div\").classed(\"max label\", true);\n\n\tlegend_count++;\n\n\treturn this;\n}\n\n// Common methods\nContinuousColorLegend.prototype.appendTo = appendTo;\nContinuousColorLegend.prototype.format = format;\nContinuousColorLegend.prototype.getContainer = getContainer;\nContinuousColorLegend.prototype.visible = visible;\nContinuousColorLegend.prototype.autoTitle = autoTitle;\nContinuousColorLegend.prototype._updateTitle = _updateTitle;\n\nContinuousColorLegend.prototype.data = function(items_, colorFunction_) {\n\t// items_ must be a 2-element or 3-element domain array [minValue, midValue, maxValue]\n\t// colorFunction_ must be a scale function with color range\n\tif (!items_ && !colorFunction_) return this._legend_domain.slice();\n\n\tvar items = Array.isArray(items_) ? items_.slice() : [];\n\n\tthis._legend_domain = getDomain(items, this._state);\n\tthis._colorFunction = colorFunction_;\n\n\treturn this;\n};\n\nContinuousColorLegend.prototype.markerValue = function(value) {\n\tif (value === undefined) return this._marker_value;\n\tthis._marker_value = value;\n\treturn this;\n};\n\nContinuousColorLegend.prototype.update = function() {\n\tvar should_display = this._state.show_legend && this._visible && this._legend_domain.length > 0;\n\n\tthis._container.style(\"display\", should_display ? \"\" : \"none\");\n\n\tif (!should_display) return this;\n\n\tthis._updateTitle();\n\tthis._updateLegend();\n\n\treturn this;\n};\n\nContinuousColorLegend.prototype._updateLegend = function() {\n\tvar domain = this._legend_domain;\n\n\tthis._scale_type = \"continuous\";\n\tif (this._colorFunction.thresholds) this._scale_type = \"binned\";\n\telse if (domain.length > 2) this._scale_type = \"diverging\";\n\n\tvar s = this._state;\n\n\tvar w = remToPx(s.color_band_width);\n\tvar h = remToPx(s.color_band_height);\n\tvar label_w = w;\n\n\tthis._container.style(\"display\", \"inline-flex\")\n\t\t.style(\"align-items\", \"center\");\n\n\tthis._container.select(\".color-range-container\")\n\t\t.style(\"display\", \"inline-block\");\n\n\tvar canvas = this._container\n\t\t.select(\".color-range\")\n\t\t.attr(\"width\", w * pixel_ratio)\n\t\t.attr(\"height\", h * pixel_ratio)\n\t\t.style(\"border-radius\", s.color_band_radius + \"px\")\n\t\t.style(\"width\", w + \"px\")\n\t\t.style(\"height\", h + \"px\")\n\t\t.style(\"display\", \"block\");\n\n\tthis._container\n\t\t.select(\".color-range-labels\")\n\t\t.attr(\"width\", label_w * pixel_ratio)\n\t\t.style(\"width\", label_w + \"px\")\n\t\t.style(\"display\", this._scale_type == \"continuous\" ? \"none\" : \"block\")\n\t\t.node().getContext(\"2d\").scale(pixel_ratio, pixel_ratio);\n\n\t// Update canvas\n\tvar ctx = canvas.node().getContext(\"2d\");\n\tctx.scale(pixel_ratio, pixel_ratio);\n\n\tfunction xToVal(x) {\n\t\treturn domain.min + (x / w) * (domain.max - domain.min);\n\t}\n\n\tfor (var x = 0; x < w; x++) {\n\t\tvar color = this._colorFunction(xToVal(x));\n\t\tctx.fillStyle = color;\n\t\tctx.strokeStyle = color;\n\t\tctx.fillRect(x, 0, 1, h);\n\t\tctx.strokeRect(x, 0, 1, h);\n\t}\n\n\tif (this._marker_value !== null) {\n\t\tvar xScale = scaleLinear().domain([domain.min, domain.max]).range([0, w]);\n\t\tvar x_marker = xScale(this.markerValue());\n\t\tvar y_top = 0;\n\t\tvar y_bottom = h;\n\t\tctx.save();\n\t\tctx.strokeStyle = \"#FFFFFF\";\n\t\tctx.lineWidth = 3;\n\t\tctx.beginPath();\n\t\tctx.moveTo(x_marker, y_top);\n\t\tctx.lineTo(x_marker, y_bottom);\n\t\tctx.stroke();\n\t\tctx.strokeStyle = \"#000000\";\n\t\tctx.lineWidth = 1;\n\t\tctx.beginPath();\n\t\tctx.moveTo(x_marker, y_top);\n\t\tctx.lineTo(x_marker, y_bottom);\n\t\tctx.stroke();\n\t\tctx.restore();\n\t}\n\n\tthis._updateLegendLabels();\n};\n\nContinuousColorLegend.prototype._updateLegendLabels = function () {\n\tvar label_canvas = this._container.select(\".color-range-labels\");\n\tvar format = this._formatFunction;\n\tvar domain = this._legend_domain;\n\tvar s = this._state;\n\n\tthis._container\n\t\t.select(\".min.label\")\n\t\t.style(\"display\", this._scale_type == \"continuous\" ? \"inline-block\" : \"none\")\n\t\t.style(\"vertical-align\", \"middle\")\n\t\t.style(\"user-select\", \"none\")\n\t\t.style(\"line-height\", \"1.25em\")\n\t\t.text(function () {\n\t\t\treturn format ? format(domain.min) : domain.min;\n\t\t});\n\n\tthis._container\n\t\t.select(\".max.label\")\n\t\t.style(\"display\", this._scale_type == \"continuous\" ? \"inline-block\" : \"none\")\n\t\t.style(\"vertical-align\", \"middle\")\n\t\t.style(\"user-select\", \"none\")\n\t\t.style(\"line-height\", \"1.25em\")\n\t\t.text(function () {\n\t\t\treturn format ? format(domain.max) : domain.max;\n\t\t});\n\n\tvar labels = [];\n\tvar label_padding_start = 0;\n\tvar label_padding_end = 0;\n\tif (this._scale_type === \"diverging\") labels = this._getDivergingLabels();\n\telse if (this._scale_type === \"binned\") labels = this._getBinnedLabels();\n\n\tif (labels.length) {\n\t\tvar ctx = label_canvas.node().getContext(\"2d\");\n\t\tctx.textAlign = \"center\";\n\t\tctx.textBaseline = \"top\";\n\n\t\tvar prepLabel = (function () {\n\t\t\tvar placed_labels = [];\n\t\t\tvar band_width = remToPx(s.color_band_width);\n\t\t\tvar inRange = getInRangeFunction([0, band_width]);\n\t\t\tvar scale = scaleLinear().domain([domain.min, domain.max]).range([0, band_width]);\n\n\t\t\treturn function (value) {\n\t\t\t\tvar center = scale(value);\n\n\t\t\t\tif (!inRange(center)) return;\n\n\t\t\t\tvar text = format ? format(value) : value;\n\t\t\t\tvar half_width = (ctx.measureText(text).width / 2) + 1;\n\t\t\t\tvar left = center - half_width;\n\t\t\t\tvar right = center + half_width;\n\n\t\t\t\tvar index = 0;\n\t\t\t\tvar n = placed_labels.length;\n\n\t\t\t\tfor (var i = 0; i < n; i++) {\n\t\t\t\t\tif (center > placed_labels[i].center) index++;\n\t\t\t\t\telse break;\n\t\t\t\t}\n\n\t\t\t\tvar at_start = index === 0;\n\t\t\t\tvar at_end = index === n;\n\t\t\t\tif (!at_start && placed_labels[index - 1].right > left) return;\n\t\t\t\tif (!at_end && placed_labels[index].left < right) return;\n\t\t\t\tif (at_start) label_padding_start = Math.abs(Math.min(0, left));\n\t\t\t\tif (at_end) label_padding_end = Math.max(0, right - band_width);\n\n\t\t\t\tplaced_labels.splice(index, 0, { left: left, center: center, right: right });\n\t\t\t\treturn { text: text, position: center };\n\t\t\t};\n\t\t})();\n\n\t\tvar prepped_labels = labels.map(function (value) {\n\t\t\treturn prepLabel(value);\n\t\t});\n\n\t\tvar label_canvas_width = remToPx(s.color_band_width) + label_padding_start + label_padding_end;\n\n\t\tlabel_canvas\n\t\t.attr(\"width\", label_canvas_width * pixel_ratio)\n\t\t.style(\"width\", label_canvas_width + \"px\");\n\t\tselect(\".color-range\").style(\"margin-left\", label_padding_start + \"px\");\n\n\t\tctx.scale(pixel_ratio, pixel_ratio);\n\t\tctx.textAlign = \"center\";\n\t\tctx.textBaseline = \"top\";\n\n\t\tvar data = label_canvas.datum();\n\t\tfor (var key in data) {\n\t\t\tctx[key] = data[key];\n\t\t}\n\t\tprepped_labels.forEach(function(label) {\n\t\t\tif (label) ctx.fillText(label.text, label.position + label_padding_start, 0);\n\t\t});\n\t}\n};\n\nContinuousColorLegend.prototype._getDivergingLabels = function() {\n\tvar domain = this._legend_domain;\n\tvar inRange = getInRangeFunction(domain);\n\tvar labels = [];\n\n\tif (inRange(domain.min)) labels.push(domain.min);\n\tif (inRange(domain.mid)) labels.push(domain.mid);\n\tif (inRange(domain.max)) labels.push(domain.max);\n\n\treturn labels;\n};\n\nContinuousColorLegend.prototype._getBinnedLabels = function () {\n\tvar s = this._state;\n\tvar domain = this._legend_domain;\n\tvar inRange = getInRangeFunction(domain);\n\tvar labels;\n\n\tif (s.binned_label_mode === \"thresholds\") {\n\t\tlabels = this._colorFunction.thresholds.slice().filter(inRange);\n\t\tif (domain.min < labels[0]) labels.unshift(domain.min);\n\t\tif (domain.max > labels[labels.length - domain.length - 1]) labels.unshift(domain.max);\n\t}\n\telse if (s.binned_label_mode === \"centers\") {\n\t\tlabels = this._colorFunction.centers.slice().filter(inRange);\n\t\tif (labels.length) {\n\t\t\tvar thresholds = this._colorFunction.thresholds;\n\t\t\tvar first_threshold = thresholds[0];\n\t\t\tvar last_threshold = thresholds[thresholds.length - 1];\n\t\t\tif (first_threshold > domain.min) labels.unshift((domain.min + first_threshold) / 2);\n\t\t\tif (last_threshold < domain.max) labels.unshift((last_threshold + domain.max) / 2);\n\t\t}\n\t\telse labels.push((domain.min + domain.max) / 2);\n\t}\n\telse labels = s.binned_label_custom.split(\";\").map(parseFloat);\n\n\treturn labels;\n};\n\nfunction getInRangeFunction(range) {\n\tvar legend_max = -Infinity;\n\tvar legend_min = Infinity;\n\tfor (var i in range) {\n\t\tlegend_max = Math.max(legend_max, range[i]);\n\t\tlegend_min = Math.min(legend_min, range[i]);\n\t}\n\treturn function (val) { return val >= legend_min && val <= legend_max; };\n}\n\nexport default ContinuousColorLegend;\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"],\n  minus: \"-\"\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import { select } from \"d3-selection\";\nimport { appendTo, format, getContainer, visible, autoTitle, _updateTitle } from \"../common\";\nimport { remToPx, roundDown } from \"../utils\";\n\nvar legend_count = 0;\nvar DEFAULTS = Object.freeze({\n\tshow_legend: true,\n\n\ttitle_mode: \"auto\",\n\ttitle: \"\",\n\n\tclip_height: 1,\n\tsmall_circle_size: 0.5,\n\n\tshape_fill: \"#eeeeee\",\n\tshape_stroke: \"#555555\",\n\n});\n\nfunction ContinuousSizeLegend(state_) {\n\tthis._state = state_;\n\tfor (var key in DEFAULTS) {\tif (this._state[key] === undefined) this._state[key] = DEFAULTS[key]; }\n\n\tthis._scaleFunction = undefined;\n\tthis._formatFunction = undefined;\n\tthis._id = \"fl-legend-continuous-size-\" + legend_count;\n\tthis._visible = true;\n\tthis._auto_title = \"\";\n\n\tthis._container = select(document.createElement(\"div\"))\n\t\t.attr(\"class\", \"fl-legend-container\")\n\t\t.attr(\"id\", this._id)\n\t\t.style(\"display\", \"none\")\n\t\t.style(\"align-items\", \"center\");\n\n\tthis._container.append(\"p\")\n\t\t.attr(\"class\", \"fl-legend-title\");\n\n\tthis._container.append(\"div\")\n\t\t.classed(\"min label\", true);\n\n\tvar circles_container = this._container.append(\"div\")\n\t\t.classed(\"circles\", true);\n\n\tcircles_container.append(\"canvas\")\n\t\t.classed(\"min circle\", true);\n\n\tcircles_container.append(\"canvas\")\n\t\t.classed(\"max circle\", true);\n\n\tthis._container.append(\"div\")\n\t\t.classed(\"max label\", true);\n\n\tlegend_count++;\n\n\treturn this;\n}\n\n// Common methods\nContinuousSizeLegend.prototype.appendTo = appendTo;\nContinuousSizeLegend.prototype.format = format;\nContinuousSizeLegend.prototype.autoTitle = autoTitle;\nContinuousSizeLegend.prototype._updateTitle = _updateTitle;\nContinuousSizeLegend.prototype.getContainer = getContainer;\nContinuousSizeLegend.prototype.visible = visible;\n\n\nContinuousSizeLegend.prototype.scale = function(scaleFunction_) {\n\t// scaleFunction_ must be a scale function with size (radius) range\n\t// domain and range are assumed to be [0, max] where max is a number > 0\n\tif (scaleFunction_ === undefined) return this._scaleFunction;\n\n\tthis._scaleFunction = scaleFunction_;\n\n\treturn this;\n};\n\nContinuousSizeLegend.prototype.update = function() {\n\tvar should_display = this._state.show_legend && this._visible;\n\n\tvar h = Math.ceil(remToPx(this._state.clip_height));\n\tthis._container\n\t\t.style(\"display\", should_display ? \"inline-flex\" : \"none\")\n\t\t.style(\"align-items\", \"center\")\n\t\t.style(\"min-height\", h + \"px\");\n\n\tif (!should_display || !this._scaleFunction) return this;\n\n\tif (this._scaleFunction.domain()[0] !== 0) {\n\t\tconsole.warn(\"Non zero domain[0] in ContinuousSizeLegend\");\n\t}\n\n\tif (this._scaleFunction.range()[0] !== 0) {\n\t\tconsole.warn(\"Non zero range[0] in ContinuousSizeLegend\");\n\t}\n\n\tthis._updateTitle();\n\tthis._updateLegend();\n\n\treturn this;\n};\n\nContinuousSizeLegend.prototype._updateLegend = function() {\n\tvar domain = this._scaleFunction.domain();\n\tvar range = this._scaleFunction.range();\n\tvar format = this._formatFunction;\n\tvar s = this._state;\n\tvar h = remToPx(s.clip_height);\n\th = Math.ceil(Math.min(h, range[1] * 2));\n\tvar pixel_ratio = window.devicePixelRatio || 1;\n\n\tvar fill = s.shape_fill;\n\tvar stroke = s.shape_stroke;\n\n\tthis._container\n\t\t.style(\"min-height\", h + \"px\");\n\n\tthis._container.select(\".circles\")\n\t\t.style(\"display\", \"flex\")\n\t\t.style(\"flex-wrap\", \"nowrap\");\n\n\t// Calculate max circle size\n\tvar val_max_unrounded = this._scaleFunction.invert(h/2);\n\tval_max_unrounded = Math.min(val_max_unrounded, domain[1]);\n\tvar val_max = roundDown(val_max_unrounded) || 0;\n\n\t// Min circle\n\tvar val_min = val_max * s.small_circle_size;\n\tvar r_min = this._scaleFunction(val_min);\n\tvar w_min = Math.ceil(2 * r_min) + 2;\n\tvar canvas_min = this._container\n\t\t.select(\".min.circle\")\n\t\t.style(\"width\", w_min + \"px\")\n\t\t.style(\"height\", h + \"px\")\n\t\t.attr(\"width\", w_min * pixel_ratio)\n\t\t.attr(\"height\", h * pixel_ratio)\n\t\t.style(\"margin-right\", \"0.05rem\");\n\n\tthis._container\n\t\t.select(\".min.label\")\n\t\t.style(\"user-select\", \"none\")\n\t\t.style(\"line-height\", \"1.25em\")\n\t\t.text(function () {\n\t\t\treturn format ? format(val_min) : val_min;\n\t\t});\n\n\tvar ctx_min = canvas_min.node().getContext(\"2d\");\n\tctx_min.scale(pixel_ratio, pixel_ratio);\n\tctx_min.fillStyle = fill;\n\tctx_min.clearRect(0, 0, 2 * r_min, 2 * r_min);\n\n\tctx_min.beginPath();\n\tctx_min.fillStyle = stroke;\n\tctx_min.arc(0.5 * w_min, 0.5 * h, r_min, 0, 2 * Math.PI);\n\tctx_min.fill();\n\n\tctx_min.beginPath();\n\tctx_min.fillStyle = fill;\n\tctx_min.arc(0.5 * w_min, 0.5 * h, Math.max(r_min - 1, 0), 0, 2 * Math.PI);\n\tctx_min.fill();\n\n\t// Max circle\n\tvar r_max = this._scaleFunction(val_max);\n\tvar w_max = Math.ceil(2 * r_max) + 2;\n\n\tvar canvas_max = this._container\n\t\t.select(\".max.circle\")\n\t\t.style(\"width\", w_max + \"px\")\n\t\t.style(\"height\", h + \"px\")\n\t\t.attr(\"width\", w_max * pixel_ratio)\n\t\t.attr(\"height\", h * pixel_ratio)\n\t\t.style(\"margin-left\", \"0.05rem\");\n\n\tthis._container\n\t\t.select(\".max.label\")\n\t\t.style(\"user-select\", \"none\")\n\t\t.style(\"line-height\", \"1.25em\")\n\t\t.text(function () {\n\t\t\treturn format ? format(val_max) : val_max;\n\t\t});\n\n\tvar ctx_max = canvas_max.node().getContext(\"2d\");\n\tctx_max.scale(pixel_ratio, pixel_ratio);\n\tctx_max.clearRect(0, 0, 2 * r_max, 2 * r_max);\n\n\t// To ensure size of larger circle is accurate, draw two circles where the\n\t// outer (darker) one is the required size and the inside one slightly smaller\n\t// This gives the impression of a circle with darker stroke\n\tctx_max.beginPath();\n\tctx_max.fillStyle = stroke;\n\tctx_max.arc(0.5 * w_max, 0.5 * h, r_max, 0, 2 * Math.PI);\n\tctx_max.fill();\n\n\tctx_max.beginPath();\n\tctx_max.fillStyle = fill;\n\tctx_max.arc(0.5 * w_max, 0.5 * h, Math.max(r_max - 1, 0), 0, 2 * Math.PI);\n\tctx_max.fill();\n};\n\nexport default ContinuousSizeLegend;\n","import { createLegendContainer, createDiscreteColorLegend, createContinuousColorLegend, createContinuousSizeLegend } from \"@flourish/legend\";\n\nexport var state = {\n  legend_container: {},\n  legend_categorical: {},\n  legend_continuous: {},\n  legend_size: {}\n  // The current state of template. You can make some or all of the properties\n  // of the state object available to the user as settings in settings.js.\n};\n\nconst legend_container = createLegendContainer(state.legend_container);\nconst legend_categorical = createDiscreteColorLegend(state.legend_categorical);\nconst legend_continuous = createContinuousColorLegend(state.legend_continuous);\nconst legend_size = createContinuousSizeLegend(state.legend_size);\n\nfunction init() {\n\n  legend_container\n  \t.appendTo(document.getElementById(\"legend\"))\n  \t.add([\n  \t\tlegend_categorical,\n  \t\tlegend_continuous,\n  \t\tlegend_size\n  \t]);\n  \n}\n\nexport var data = {};\n// If your template includes data tables, use this variable to access the data.\n// Each of the 'datasets' in data.json file will be available as properties of the data.\n\n\n\nexport function update() {\n\n  var legend_items = [\n    {\n      label: \"Brazil\",\n      color: \"#ff0000\"\n    },\n    {\n      label: \"Argentina\",\n      color: \"#000000\"\n    }\n  ]\n  legend_categorical.data(legend_items);\n\n  var legend_continuous_items = [\n    {\n      label: 10,\n      color: \"#ff0000\"\n    },\n    {\n      label: 0,\n      color: \"#000000\"\n    }\n  ]\n\n  legend_continuous.data(legend_continuous_items);\n\n  legend_container.update()\n  // The update function is called whenever the user changes a data table or settings\n  // in the visualisation editor, or when changing slides in the story editor.\n\n  // Tip: to make your template work nicely in the story editor, ensure that all user\n  // interface controls such as buttons and sliders update the state and then call update.\n}\n\nexport function draw() {\n  // The draw function is called when the template first loads\n  init();\n\n  update();\n}\n","import DiscreteColorLegend from \"./discrete-color\";\nimport ContinuousColorLegend from \"./continuous-color\";\nimport ContinuousSizeLegend from \"./continuous-size\";\nimport legendContainer from \"./container\";\n\nfunction createLegendContainer(state) {\n\treturn new legendContainer(state);\n}\n\nfunction createDiscreteColorLegend(state) {\n\treturn new DiscreteColorLegend(state);\n}\n\nfunction createContinuousColorLegend(state) {\n\treturn new ContinuousColorLegend(state);\n}\n\nfunction createContinuousSizeLegend(state) {\n\treturn new ContinuousSizeLegend(state);\n}\n\nexport { createLegendContainer, createDiscreteColorLegend, createContinuousColorLegend, createContinuousSizeLegend };\n"],"names":["xhtml","svg","xlink","xml","xmlns","name","prefix","i","indexOf","slice","namespaces","hasOwnProperty","space","local","fullname","namespace","this","ownerDocument","createElementNS","document","uri","namespaceURI","documentElement","createElement","none","selector","querySelector","empty","update","Array","length","EnterNode","parent","datum","_next","_parent","__data__","prototype","constructor","appendChild","child","insertBefore","next","querySelectorAll","keyPrefix","bindIndex","group","enter","exit","data","node","groupLength","dataLength","bindKey","key","keyValue","nodeByKeyValue","keyValues","call","ascending","a","b","NaN","defaultView","classArray","string","trim","split","classList","ClassList","_node","_names","getAttribute","classedAdd","names","list","n","add","classedRemove","remove","textRemove","textContent","htmlRemove","innerHTML","raise","nextSibling","parentNode","lower","previousSibling","firstChild","constantNull","removeChild","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","push","setAttribute","join","splice","contains","filterEvents","event","filterContextListener","listener","index","contextListener","related","relatedTarget","compareDocumentPosition","event1","event0","onRemove","typename","on","__on","o","j","m","type","removeEventListener","capture","onAdd","value","wrap","d","addEventListener","dispatchEvent","params","window","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","mouseenter","mouseleave","root","Selection","groups","parents","_groups","_parents","select","subgroups","subnode","subgroup","selectAll","filter","match","matches","size","each","x","bind","enterGroup","updateGroup","previous","i0","i1","_enter","_exit","map","sparse","onenter","onupdate","onexit","append","merge","order","selection","groups0","groups1","m0","m1","Math","min","merges","group0","group1","sort","compare","compareNode","sortgroups","sortgroup","callback","arguments","apply","nodes","attr","getAttributeNS","removeAttributeNS","removeAttribute","v","setAttributeNS","style","priority","removeProperty","setProperty","getPropertyValue","getComputedStyle","property","classed","text","html","create","creator","insert","before","deep","t","typenames","dispatch","f","bisectRight","left","lo","hi","mid","right","e10","sqrt","e5","e2","tickIncrement","start","stop","count","step","max","power","floor","log","LN10","error","pow","appendTo","container","_container","css","id","head","format","formatFunction","_formatFunction","getContainer","visible","visible_","undefined","_visible","autoTitle","_auto_title","_updateTitle","_this","title","_state","title_mode","orientation","remToPx","rem","parseFloat","fontSize","roundDown","val","exp","normalised_val","rounded","toFixed","DEFAULTS","Object","freeze","alignment","text_color","title_weight","text_weight","text_size","legendContainer","state_","container_","legends","_legends","isArray","self","forEach","legend","console","warn","font_size","small_gap","mid_gap","is_horizontal","flex_alignment","template","layout","state","font_color","font_family","body_font","body","fontFamily","font_size_in_px","styles","fillStyle","font","pixel_ratio","devicePixelRatio","label_h","ceil","legend_count","show_legend","max_width","swatch_width","swatch_height","swatch_radius","icon_height","icon_color","order_override","DiscreteColorLegend","_colorFunction","_legend_items","_filtered_items","_eventListeners","_id","items_","colorFunction_","legend_item","legend_item_label","label","color","filtered","d3_event","target","t_parent","item","item_data","should_display","_updateLegend","legend_item_data","items","order_override_string","new_index_lookup","overrides","sorted_items","old_index","new_index","sortByOrderOverride","legend_items","legend_items_enter","legend_items_update","default_text_size","icon","w","width","h","height","stroke_width","outline","stroke_thickness","width_px","path_string","transform","_legend_item_els","Map","object","set","has","get","clear","keys","values","entries","array","factory","extend","definition","Color","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","l","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","r","g","opacity","rgb_formatHex","hex","rgb_formatRgb","isNaN","round","toString","s","Hsl","hslConvert","hsl2rgb","m2","gamma","y","nogamma","constant","define","copy","channels","assign","displayable","formatHsl","brighter","k","darker","rgbGamma","end","colorRgb","reA","reB","source","number","c","am","bm","bs","bi","lastIndex","q","Date","setTime","ArrayBuffer","isView","DataView","nb","na","valueOf","unit","identity","normalize","clamper","domain","bimap","range","interpolate","d0","d1","r0","r1","polymap","reverse","bisect","continuous","untransform","interpolateValue","clamp","scale","invert","input","piecewise","interpolateNumber","_","rescale","rangeRound","interpolateRound","unknown","u","transformer","output","formatDecimalParts","p","toExponential","coefficient","abs","prefixExponent","re","formatSpecifier","specifier","Error","FormatSpecifier","fill","align","sign","symbol","zero","comma","precision","exponent","%","toLocaleString","replace","e","toPrecision","formatRounded","X","toUpperCase","prefixes","locale","numerals","grouping","thousands","Number","substring","currencyPrefix","currency","currencySuffix","decimal","String","percent","minus","nan","newFormat","formatTypes","test","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","formatTrim","charCodeAt","Infinity","padding","formatPrefix","step0","step1","linearish","ticks","isFinite","tickFormat","nice","linear","formatLocale","color_band_width","color_band_height","color_band_radius","binned_label_mode","binned_label_custom","legend_min","legend_max","ContinuousColorLegend","_legend_domain","_marker_value","getInRangeFunction","domain_","domain_min","domain_max","domain_mid","legend_domain","markerValue","_scale_type","thresholds","label_w","canvas","getContext","ctx","strokeStyle","fillRect","strokeRect","x_marker","scaleLinear","xScale","y_bottom","save","lineWidth","beginPath","moveTo","lineTo","stroke","restore","_updateLegendLabels","label_canvas","placed_labels","band_width","inRange","labels","label_padding_start","label_padding_end","_getDivergingLabels","_getBinnedLabels","textAlign","textBaseline","prepLabel","center","half_width","measureText","at_start","at_end","position","prepped_labels","label_canvas_width","fillText","last_threshold","unshift","centers","first_threshold","clip_height","small_circle_size","shape_fill","shape_stroke","ContinuousSizeLegend","_scaleFunction","circles_container","scaleFunction_","val_max_unrounded","val_max","val_min","r_min","w_min","canvas_min","ctx_min","clearRect","arc","PI","r_max","w_max","canvas_max","ctx_max","legend_container","legend_categorical","legend_continuous","legend_size","getElementById"],"mappings":"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"}